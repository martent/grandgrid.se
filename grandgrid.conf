## Let's encrypt cert
# # If needed, generate snakeoil certs first
# sudo openssl req \
#        -newkey rsa:2048 -nodes -keyout /etc/ssl/private/ssl-cert-snakeoil.key \
#        -x509 -days 365 -out /etc/ssl/certs/ssl-cert-snakeoil.crt
#
# sudo certbot --nginx
# sudo certbot renew

server {
  server_name grandgrid.se www.grandgrid.se grandgrid.com www.grandgrid.com;
  listen 443 ssl;

  if ($http_host ~* "^grandgrid.com"){
      return 301 https://grandgrid.se$request_uri;
  }

  root /home/app_runner/webapps/grandgrid.se;

  # ssl_certificate /etc/ssl/certs/ssl-cert-snakeoil.crt;
  # ssl_certificate_key /etc/ssl/private/ssl-cert-snakeoil.key;
  ssl_certificate /etc/letsencrypt/live/grandgrid.se/fullchain.pem; # managed by Certbot
  ssl_certificate_key /etc/letsencrypt/live/grandgrid.se/privkey.pem; # managed by Certbot

  add_header X-UA-Compatible "IE=Edge";
}
